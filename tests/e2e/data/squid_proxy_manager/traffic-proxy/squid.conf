# Squid configuration for traffic-proxy
# Generated by Squid Proxy Manager Add-on

# Basic settings
pid_filename none
http_port 3136

# Access control
acl localnet src 10.0.0.0/8
acl localnet src 172.16.0.0/12
acl localnet src 192.168.0.0/16
acl localnet src fc00::/7
acl localnet src fe80::/10

# Authentication
auth_param basic program /usr/lib/squid/basic_ncsa_auth /data/squid_proxy_manager/traffic-proxy/passwd
auth_param basic children 5
auth_param basic realm Squid Proxy
auth_param basic credentialsttl 2 hours

# ACL for authenticated users
acl authenticated proxy_auth REQUIRED

# HTTP access
http_access allow authenticated
http_access deny all

# Logging
access_log stdio:/data/squid_proxy_manager/logs/traffic-proxy/access.log squid
cache_log /data/squid_proxy_manager/logs/traffic-proxy/cache.log

# Cache settings (minimal for proxy-only mode)
cache_dir ufs /data/squid_proxy_manager/logs/traffic-proxy/cache 100 16 256
cache_mem 64 MB
maximum_object_size_in_memory 512 KB

# Security hardening
via off
forwarded_for delete
request_header_access X-Forwarded-For deny all
request_header_access Via deny all
request_header_access Cache-Control deny all

# Disable unnecessary features
cache deny all

# Error pages
error_directory /usr/share/squid/errors/en
